---
title: "charles抓包ios的http/https请求"
date: "2020-04-04"
categories: 
  - "system"
tags: 
  - "charles"
  - "mac"
---

### 步骤一 电脑端charles操作

首先打开charles，在菜单栏proxy>proxy settings中找到http代理，设置代理端口默认为8888  
![主要图](images/2216144946.png "主要图")

### 步骤二 手机端ios操作

在wifi设置中，配置http代理，代理方式为手动 服务器为电脑端本机ip，端口8888![WechatIMG205.jpeg](images/3690712611.jpeg "WechatIMG205.jpeg")

这个时候charles已经能拦截ios端http请求，但是https请求还不行。这需要手机端安装charles证书，并且在charles添加https域名代理，具体操作如下。

### 步骤三 电脑端charles操作

在在菜单栏help>ssl proxying中找到install charles certificate on a Mobile Device or Remote Browser,这时会弹出如下弹框  
![未标题-1.png](images/2706574079.png "未标题-1.png")  
![未标题-1.png](images/2639295422.png "未标题-1.png")

### 步骤四 手机端ios操作

在手机Safari浏览器访问地址 chls.pro/ssl，会出现证书安装页面，点击安装，安装好证书，需要在 设置→通用→关于本机→证书信任设置 里面启用完全信任Charles证书  
![WechatIMG206.jpeg](images/2544304901.jpeg "WechatIMG206.jpeg")  
这个时候按理说应该可以拦截https了，毕竟安装了证书了嘛，实际试验后还是会很失望的，这里还需要最后一步，添加访问的域名

### 步骤五 电脑端charles操作

假如我们想调试微博的域名[https://weibo.com/](https://weibo.com/)，在菜单栏proxy>ssl proxyings settings中添加微博的域名，以及443端口，完成这步操作后就可以调试https啦。  
![未标题-1.png](images/4074217438.png "未标题-1.png")
